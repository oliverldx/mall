<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.macro.mall.dao.TosOrderCourseDao">

    <resultMap id="TosOrderCourseDto" type="com.macro.mall.dto.TosOrderCourseDto" extends="com.macro.mall.mapper.TosOrderCourseMapper.BaseResultMap">
                <result column="course_id" jdbcType="BIGINT" property="courseId" />
                <result column="course_pic" jdbcType="VARCHAR" property="coursePic" />
                <result column="course_name" jdbcType="VARCHAR" property="courseName" />
    </resultMap>

    <select id="getList" resultMap="TosOrderCourseDto">
        SELECT tos_order_course.id,tos_order_course.tos_order_id,trs_course.id course_id,trs_course.pic course_pic,trs_course.name course_name
	 FROM tos_order_course as tos_order_course
	 LEFT JOIN tos_order as tos_order ON tos_order_course.tos_order_id = tos_order.id
	 LEFT JOIN trs_course as trs_course ON tos_order_course.trs_course_id = trs_course.id

	where 
		tos_order_course.tos_order_id=#{queryParam.tosOrderId}
    </select>

    <resultMap id="TosOrderCourseSubListQueryParam" type="com.macro.mall.dto.TosOrderCourseSubListQueryParam">
    </resultMap>

    <select id="getCourseList" resultMap="TosOrderCourseSubListQueryParam">
        SELECT trs_course.id,trs_course.pic,trs_course.name
	 FROM 
	trs_course as trs_course
	 LEFT JOIN tos_order_course as tos_order_course ON trs_course.id = tos_order_course.trs_course_id

	 WHERE 
	tos_order_course.id IS NULL
	<if test="queryParam.id!=null">
	 and trs_course.id = #{queryParam.id}
	</if>
	<if test="queryParam.pic!=null">
	 and trs_course.pic = #{queryParam.pic}
	</if>
	<if test="queryParam.name!=null">
	 and trs_course.name = #{queryParam.name}
	</if>
    </select>
</mapper>